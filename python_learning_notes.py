# -*- coding: utf-8 -*-
"""
Python å­¦ä¹ ç¬”è®° (Python Learning Notes)
========================================
ä½œè€…: jingwang1
æ—¥æœŸ: 2026-02-27
æè¿°: Python åŸºç¡€å­¦ä¹ ç¬”è®°ï¼ŒåŒ…å«å¾ªç¯ã€æ•°æ®ç»“æ„ã€å‡½æ•°ã€å†…å­˜ç®¡ç†ç­‰æ ¸å¿ƒæ¦‚å¿µ

ç›®å½•:
1. å¾ªç¯ç»“æ„ (Loops)
2. æ§åˆ¶è¯­å¥ (Control Statements: pass, continue, break)
3. æ•°æ®ç»“æ„ (Data Structures)
4. é›†åˆæ“ä½œ (Set Operations)
5. å‡½æ•° (*args, **kwargs, lambda, è£…é¥°å™¨)
6. å†…å­˜ç®¡ç† (è¿­ä»£å™¨ã€æµ…æ‹·è´ã€æ·±æ‹·è´)
7. æ–‡ä»¶æ“ä½œ (File Operations)
8. å¼‚å¸¸å¤„ç† (Exception Handling)
9. æ¨¡å—å¯¼å…¥ (Modules)
"""

# ============================================================================
# 1. å¾ªç¯ç»“æ„ (Loops)
# ============================================================================

# --- for å¾ªç¯ ---
print("=" * 50)
print("1. å¾ªç¯ç»“æ„")
print("=" * 50)

# åŸºæœ¬ for å¾ªç¯
fruits = ["è‹¹æœ", "é¦™è•‰", "æ©™å­"]
for fruit in fruits:
    print(fruit)

# range() å‡½æ•°
for i in range(5):        # 0, 1, 2, 3, 4
    print(i)

for i in range(2, 8):     # 2, 3, 4, 5, 6, 7
    print(i)

for i in range(0, 10, 2): # 0, 2, 4, 6, 8 (æ­¥é•¿ä¸º2)
    print(i)

# --- while å¾ªç¯ ---
count = 0
while count < 5:
    print(count)
    count += 1

# --- enumerate() åŒæ—¶è·å–ç´¢å¼•å’Œå€¼ ---
colors = ["çº¢", "ç»¿", "è“"]
for index, color in enumerate(colors):
    print(f"ç´¢å¼• {index}: {color}")
# è¾“å‡º:
# ç´¢å¼• 0: çº¢
# ç´¢å¼• 1: ç»¿
# ç´¢å¼• 2: è“


# ============================================================================
# 2. æ§åˆ¶è¯­å¥: pass, continue, break
# ============================================================================
"""
å¯¹æ¯”è¡¨:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å…³é”®å­—    â”‚ ä½œç”¨                        â”‚ å¾ªç¯ç»§ç»­?       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ pass     â”‚ ä»€ä¹ˆéƒ½ä¸åšï¼Œå ä½ç¬¦           â”‚ âœ… ç»§ç»­æ‰§è¡Œä¸‹é¢ä»£ç  â”‚
â”‚ continue â”‚ è·³è¿‡æœ¬æ¬¡å¾ªç¯å‰©ä½™ä»£ç          â”‚ âœ… è¿›å…¥ä¸‹ä¸€æ¬¡è¿­ä»£  â”‚
â”‚ break    â”‚ å®Œå…¨é€€å‡ºå¾ªç¯                â”‚ âŒ ç«‹å³é€€å‡ºå¾ªç¯   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
"""

print("\n" + "=" * 50)
print("2. æ§åˆ¶è¯­å¥: pass, continue, break")
print("=" * 50)

# --- pass: ä»€ä¹ˆéƒ½ä¸åšï¼Œä»£ç ç»§ç»­æ‰§è¡Œ ---
print("\n--- pass ç¤ºä¾‹ ---")
for i in range(5):
    if i == 2:
        pass  # ä»€ä¹ˆéƒ½ä¸åšï¼Œä½†ä»£ç ç»§ç»­
    print(f"i = {i}")
# è¾“å‡º: 0, 1, 2, 3, 4 (å…¨éƒ¨æ‰“å°ï¼ŒåŒ…æ‹¬2)

# pass å¸¸ç”¨äºå ä½
class MyClass:
    pass  # ç¨åå®ç°

def my_function():
    pass  # ç¨åå®ç°

# --- continue: è·³è¿‡æœ¬æ¬¡ï¼Œè¿›å…¥ä¸‹ä¸€æ¬¡è¿­ä»£ ---
print("\n--- continue ç¤ºä¾‹ ---")
for i in range(5):
    if i == 2:
        continue  # è·³è¿‡ i=2
    print(f"i = {i}")
# è¾“å‡º: 0, 1, 3, 4 (è·³è¿‡äº†2)

# --- break: å®Œå…¨é€€å‡ºå¾ªç¯ ---
print("\n--- break ç¤ºä¾‹ ---")
for i in range(5):
    if i == 2:
        break  # i=2 æ—¶é€€å‡º
    print(f"i = {i}")
# è¾“å‡º: 0, 1 (2åŠä¹‹åéƒ½æ²¡æœ‰)


# ============================================================================
# 3. æ•°æ®ç»“æ„ (Data Structures)
# ============================================================================
"""
Python å››å¤§æ•°æ®ç»“æ„å¯¹æ¯”:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç±»å‹    â”‚ å¯å˜   â”‚ æœ‰åº   â”‚ å¯é‡å¤  â”‚ è¯­æ³•           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ list   â”‚ âœ…     â”‚ âœ…     â”‚ âœ…      â”‚ [1, 2, 3]      â”‚
â”‚ tuple  â”‚ âŒ     â”‚ âœ…     â”‚ âœ…      â”‚ (1, 2, 3)      â”‚
â”‚ set    â”‚ âœ…     â”‚ âŒ     â”‚ âŒ      â”‚ {1, 2, 3}      â”‚
â”‚ dict   â”‚ âœ…     â”‚ âœ…     â”‚ keyä¸é‡å¤â”‚ {"a": 1}       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
"""

print("\n" + "=" * 50)
print("3. æ•°æ®ç»“æ„")
print("=" * 50)

# --- åˆ—è¡¨ (List) ---
print("\n--- åˆ—è¡¨ List ---")
my_list = [1, 2, 3, 4, 5]
my_list.append(6)        # æ·»åŠ å…ƒç´ 
my_list.insert(0, 0)     # åœ¨ç´¢å¼•0æ’å…¥
my_list.remove(3)        # åˆ é™¤å€¼ä¸º3çš„å…ƒç´ 
popped = my_list.pop()   # å¼¹å‡ºæœ€åä¸€ä¸ªå…ƒç´ 
my_list.reverse()        # åè½¬åˆ—è¡¨
my_list.sort()           # æ’åº
print(my_list)

# åˆ—è¡¨æ¨å¯¼å¼ (List Comprehension)
squares = [x**2 for x in range(10)]          # [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]
evens = [x for x in range(20) if x % 2 == 0] # [0, 2, 4, 6, 8, 10, 12, 14, 16, 18]
print(f"å¹³æ–¹æ•°: {squares}")
print(f"å¶æ•°: {evens}")

# --- å…ƒç»„ (Tuple) ---
print("\n--- å…ƒç»„ Tuple ---")
my_tuple = (1, 2, 3)
# my_tuple[0] = 10  # âŒ é”™è¯¯ï¼å…ƒç»„ä¸å¯å˜
print(f"å…ƒç»„ç¬¬ä¸€ä¸ªå…ƒç´ : {my_tuple[0]}")
print(f"å…ƒç»„é•¿åº¦: {len(my_tuple)}")

# å…ƒç»„è§£åŒ…
a, b, c = my_tuple
print(f"è§£åŒ…: a={a}, b={b}, c={c}")

# --- å­—å…¸ (Dictionary) ---
print("\n--- å­—å…¸ Dictionary ---")
my_dict = {"name": "Alice", "age": 25, "city": "Beijing"}

# è®¿é—®
print(my_dict["name"])          # Alice
print(my_dict.get("email", "N/A"))  # N/A (keyä¸å­˜åœ¨æ—¶è¿”å›é»˜è®¤å€¼)

# ä¿®æ”¹/æ·»åŠ 
my_dict["age"] = 26             # ä¿®æ”¹
my_dict["email"] = "a@b.com"    # æ·»åŠ 

# éå†
for key, value in my_dict.items():
    print(f"{key}: {value}")

# å­—å…¸æ¨å¯¼å¼
squared_dict = {x: x**2 for x in range(5)}  # {0: 0, 1: 1, 2: 4, 3: 9, 4: 16}
print(f"å­—å…¸æ¨å¯¼å¼: {squared_dict}")

# --- é›†åˆ (Set) ---
print("\n--- é›†åˆ Set ---")
my_set = {1, 2, 3, 3, 4}  # è‡ªåŠ¨å»é‡ -> {1, 2, 3, 4}
my_set.add(5)             # æ·»åŠ å…ƒç´ 
my_set.remove(1)          # åˆ é™¤å…ƒç´ 
print(f"é›†åˆ: {my_set}")


# ============================================================================
# 4. é›†åˆæ“ä½œ (Set Operations)
# ============================================================================
"""
é›†åˆè¿ç®—ç¬¦å’Œæ–¹æ³•:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ“ä½œ                        â”‚ è¿ç®—ç¬¦     â”‚ æ–¹æ³•                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¹¶é›† (Union)               â”‚ a | b      â”‚ a.union(b)         â”‚
â”‚ äº¤é›† (Intersection)        â”‚ a & b      â”‚ a.intersection(b)  â”‚
â”‚ å·®é›† (Difference)          â”‚ a - b      â”‚ a.difference(b)    â”‚
â”‚ å¯¹ç§°å·®é›† (Symmetric Diff)  â”‚ a ^ b      â”‚ a.symmetric_diff.. â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å›¾ç¤º:
     a = {1, 2, 3, 4}
     b = {3, 4, 5, 6}
     
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚        é›†åˆ a         é›†åˆ b      â”‚
     â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”      â”‚
     â”‚     â”‚ 1   2 â”‚     â”‚ 5   6 â”‚      â”‚
     â”‚     â”‚   â”Œâ”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”   â”‚      â”‚
     â”‚     â”‚   â”‚ 3 â”‚  4  â”‚   â”‚   â”‚      â”‚
     â”‚     â”‚   â””â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”˜   â”‚      â”‚
     â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     
     äº¤é›†:    {3, 4}         â† å…±åŒæ‹¥æœ‰çš„
     å·®é›†:    {1, 2}         â† aæœ‰bæ²¡æœ‰çš„
     å¯¹ç§°å·®:  {1, 2, 5, 6}   â† åªåœ¨å…¶ä¸­ä¸€ä¸ªé›†åˆçš„
"""

print("\n" + "=" * 50)
print("4. é›†åˆæ“ä½œ")
print("=" * 50)

a = {1, 2, 3, 4}
b = {3, 4, 5, 6}

# äº¤é›† (Intersection) - ä¸¤ä¸ªé›†åˆå…±æœ‰çš„å…ƒç´ 
intersection = a.intersection(b)  # æˆ– a & b
print(f"äº¤é›† a âˆ© b: {intersection}")  # {3, 4}

# å¹¶é›† (Union) - ä¸¤ä¸ªé›†åˆæ‰€æœ‰å…ƒç´ 
union = a.union(b)  # æˆ– a | b
print(f"å¹¶é›† a âˆª b: {union}")  # {1, 2, 3, 4, 5, 6}

# å·®é›† (Difference) - åœ¨aä¸­ä½†ä¸åœ¨bä¸­çš„å…ƒç´ 
difference = a.difference(b)  # æˆ– a - b
print(f"å·®é›† a - b: {difference}")  # {1, 2}

# å¯¹ç§°å·®é›† (Symmetric Difference) - åªåœ¨ä¸€ä¸ªé›†åˆä¸­å‡ºç°çš„å…ƒç´ 
symmetric_diff = a.symmetric_difference(b)  # æˆ– a ^ b
print(f"å¯¹ç§°å·®é›† a â–³ b: {symmetric_diff}")  # {1, 2, 5, 6}

# å®é™…åº”ç”¨ç¤ºä¾‹
enrolled_students = {"Alice", "Bob", "Charlie", "David"}
submitted_homework = {"Bob", "David", "Eve"}

# è°äº¤äº†ä½œä¸šä½†æ²¡æ³¨å†Œ?
print(f"æœªæ³¨å†Œä½†äº¤äº†ä½œä¸š: {submitted_homework - enrolled_students}")  # {'Eve'}

# è°æ³¨å†Œäº†ä½†æ²¡äº¤ä½œä¸š?
print(f"æ³¨å†Œä½†æ²¡äº¤ä½œä¸š: {enrolled_students - submitted_homework}")  # {'Alice', 'Charlie'}


# ============================================================================
# 5. å‡½æ•° (Functions)
# ============================================================================

print("\n" + "=" * 50)
print("5. å‡½æ•°")
print("=" * 50)

# --- åŸºæœ¬å‡½æ•°å®šä¹‰ ---
def greet(name, greeting="ä½ å¥½"):
    """å¸¦é»˜è®¤å‚æ•°çš„å‡½æ•°"""
    return f"{greeting}, {name}!"

print(greet("Alice"))             # ä½ å¥½, Alice!
print(greet("Bob", "Hi"))         # Hi, Bob!


# --- *args: æ¥æ”¶ä»»æ„æ•°é‡çš„ä½ç½®å‚æ•° (æ‰“åŒ…æˆå…ƒç»„) ---
print("\n--- *args ç¤ºä¾‹ ---")
def sum_all(*args):
    """æ¥æ”¶ä»»æ„æ•°é‡å‚æ•°å¹¶æ±‚å’Œ"""
    print(f"argsç±»å‹: {type(args)}, å€¼: {args}")
    return sum(args)

print(sum_all(1, 2, 3))           # 6
print(sum_all(1, 2, 3, 4, 5))     # 15


# --- **kwargs: æ¥æ”¶ä»»æ„æ•°é‡çš„å…³é”®å­—å‚æ•° (æ‰“åŒ…æˆå­—å…¸) ---
print("\n--- **kwargs ç¤ºä¾‹ ---")
def create_user(**kwargs):
    """æ¥æ”¶ä»»æ„å…³é”®å­—å‚æ•°åˆ›å»ºç”¨æˆ·"""
    print(f"kwargsç±»å‹: {type(kwargs)}, å€¼: {kwargs}")
    return kwargs

user = create_user(name="Alice", age=30, city="Beijing")
print(f"ç”¨æˆ·ä¿¡æ¯: {user}")


# --- *args å’Œ **kwargs æ··åˆä½¿ç”¨ ---
print("\n--- æ··åˆä½¿ç”¨ ---")
def mixed_example(required, *args, **kwargs):
    """ä¸‰ç§å‚æ•°æ··åˆ"""
    print(f"å¿…éœ€å‚æ•°: {required}")
    print(f"é¢å¤–ä½ç½®å‚æ•°: {args}")
    print(f"é¢å¤–å…³é”®å­—å‚æ•°: {kwargs}")

mixed_example("å¿…éœ€", 1, 2, 3, name="Alice", age=30)


# --- Lambda åŒ¿åå‡½æ•° ---
print("\n--- Lambda å‡½æ•° ---")
# è¯­æ³•: lambda å‚æ•°: è¡¨è¾¾å¼
square = lambda x: x ** 2
add = lambda x, y: x + y

print(f"5çš„å¹³æ–¹: {square(5)}")    # 25
print(f"3 + 4 = {add(3, 4)}")     # 7

# Lambda å¸¸ä¸ sorted, map, filter é…åˆä½¿ç”¨
students = [("Alice", 85), ("Bob", 92), ("Charlie", 78)]
sorted_by_score = sorted(students, key=lambda x: x[1], reverse=True)
print(f"æŒ‰åˆ†æ•°æ’åº: {sorted_by_score}")


# --- è£…é¥°å™¨ (Decorator) ---
print("\n--- è£…é¥°å™¨ ---")
import time

def timer(func):
    """è®¡æ—¶è£…é¥°å™¨"""
    def wrapper(*args, **kwargs):
        start = time.time()
        result = func(*args, **kwargs)
        end = time.time()
        print(f"{func.__name__} æ‰§è¡Œæ—¶é—´: {end - start:.4f}ç§’")
        return result
    return wrapper

@timer
def slow_function():
    """æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ"""
    time.sleep(0.1)
    return "å®Œæˆ"

result = slow_function()


# ============================================================================
# 6. å†…å­˜ç®¡ç† (Memory Management)
# ============================================================================
"""
6.1 è¿­ä»£å™¨ vs åˆ—è¡¨ å†…å­˜å ç”¨
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å‡½æ•°             è¿”å›ç±»å‹      å†…å­˜å ç”¨        ç‰¹ç‚¹
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
map()           è¿­ä»£å™¨        ~48 bytes       æƒ°æ€§æ±‚å€¼
filter()        è¿­ä»£å™¨        ~48 bytes       æƒ°æ€§æ±‚å€¼
zip()           è¿­ä»£å™¨        ~48 bytes       æƒ°æ€§æ±‚å€¼
enumerate()     è¿­ä»£å™¨        ~48 bytes       æƒ°æ€§æ±‚å€¼
range()         rangeå¯¹è±¡     ~48 bytes       æƒ°æ€§æ±‚å€¼
list()          åˆ—è¡¨          8n bytes        ç«‹å³å­˜å‚¨æ‰€æœ‰å…ƒç´ 
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

6.2 èµ‹å€¼ vs æµ…æ‹·è´ vs æ·±æ‹·è´
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ“ä½œ          è¯­æ³•                  æ–°å¯¹è±¡?   åµŒå¥—å¯¹è±¡ç‹¬ç«‹?   å†…å­˜å ç”¨
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
èµ‹å€¼ (=)     b = a                 âŒ åŒå¯¹è±¡  âŒ              æœ€å°
æµ…æ‹·è´       b = a.copy()          âœ… æ–°å¯¹è±¡  âŒ å…±äº«åµŒå¥—     ä¸­ç­‰
æ·±æ‹·è´       b = copy.deepcopy(a)  âœ… æ–°å¯¹è±¡  âœ… å®Œå…¨ç‹¬ç«‹     æœ€å¤§
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å›¾ç¤ºå¯¹æ¯”:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
èµ‹å€¼ (b = a):   a â”€â”€â”¬â”€â”€â–º [1, [2, 3]]      ä¸¤ä¸ªåå­—ï¼ŒåŒä¸€ä¸ªå¯¹è±¡
                b â”€â”€â”˜

æµ…æ‹·è´:         a â”€â”€â”€â”€â–º [1, â”€â”¬â”€â–º [2, 3]]  å¤–å±‚æ–°å»ºï¼Œå†…å±‚å…±äº«
                b â”€â”€â”€â”€â–º [1, â”€â”˜         ]

æ·±æ‹·è´:         a â”€â”€â”€â”€â–º [1, â”€â”€â”€â”€â–º [2, 3]] å®Œå…¨ç‹¬ç«‹çš„å‰¯æœ¬
                b â”€â”€â”€â”€â–º [1, â”€â”€â”€â”€â–º [2, 3]]
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
"""

print("\n" + "=" * 50)
print("6. å†…å­˜ç®¡ç†")
print("=" * 50)

import sys
import copy

# --- è¿­ä»£å™¨ vs åˆ—è¡¨ ---
print("\n--- è¿­ä»£å™¨ vs åˆ—è¡¨ å†…å­˜å¯¹æ¯” ---")

# åˆ›å»ºå¤§é‡æ•°æ®
big_list = list(range(1000000))        # ç«‹å³åˆ›å»º100ä¸‡ä¸ªå…ƒç´ 
big_range = range(1000000)             # åªæ˜¯ä¸€ä¸ªrangeå¯¹è±¡
big_map = map(lambda x: x*2, range(1000000))  # åªæ˜¯ä¸€ä¸ªè¿­ä»£å™¨

print(f"list å†…å­˜: {sys.getsizeof(big_list):,} bytes")  # ~8,000,000+ bytes
print(f"range å†…å­˜: {sys.getsizeof(big_range)} bytes")   # ~48 bytes
print(f"map å†…å­˜: {sys.getsizeof(big_map)} bytes")       # ~48 bytes


# --- èµ‹å€¼ vs æµ…æ‹·è´ vs æ·±æ‹·è´ ---
print("\n--- èµ‹å€¼ vs æµ…æ‹·è´ vs æ·±æ‹·è´ ---")

# åŸå§‹åˆ—è¡¨ï¼ˆåŒ…å«åµŒå¥—åˆ—è¡¨ï¼‰
original = [1, 2, [3, 4]]

# 1. èµ‹å€¼ - åªæ˜¯åˆ›å»ºå¼•ç”¨ï¼ŒæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡
assigned = original
print(f"èµ‹å€¼å id ç›¸åŒ? {id(original) == id(assigned)}")  # True

# 2. æµ…æ‹·è´ - åˆ›å»ºæ–°å¯¹è±¡ï¼Œä½†åµŒå¥—å¯¹è±¡ä»å…±äº«
shallow = original.copy()  # æˆ– list(original) æˆ– original[:]
print(f"æµ…æ‹·è´ id ç›¸åŒ? {id(original) == id(shallow)}")   # False
print(f"åµŒå¥—åˆ—è¡¨ id ç›¸åŒ? {id(original[2]) == id(shallow[2])}")  # True!

# 3. æ·±æ‹·è´ - å®Œå…¨ç‹¬ç«‹çš„å‰¯æœ¬
deep = copy.deepcopy(original)
print(f"æ·±æ‹·è´ id ç›¸åŒ? {id(original) == id(deep)}")      # False
print(f"åµŒå¥—åˆ—è¡¨ id ç›¸åŒ? {id(original[2]) == id(deep[2])}")  # False!

# æ¼”ç¤ºä¿®æ”¹çš„å½±å“
print("\nä¿®æ”¹åµŒå¥—åˆ—è¡¨åçš„å½±å“:")
original[2].append(5)
print(f"original: {original}")  # [1, 2, [3, 4, 5]]
print(f"assigned: {assigned}")  # [1, 2, [3, 4, 5]] - å—å½±å“!
print(f"shallow:  {shallow}")   # [1, 2, [3, 4, 5]] - å—å½±å“!
print(f"deep:     {deep}")      # [1, 2, [3, 4]]    - ä¸å—å½±å“!


# ============================================================================
# 7. æ–‡ä»¶æ“ä½œ (File Operations)
# ============================================================================

print("\n" + "=" * 50)
print("7. æ–‡ä»¶æ“ä½œ")
print("=" * 50)

# --- åŸºæœ¬æ–‡ä»¶è¯»å†™ ---
# å†™å…¥æ–‡ä»¶
with open("example.txt", "w", encoding="utf-8") as f:
    f.write("Hello, Python!\n")
    f.write("è¿™æ˜¯ç¬¬äºŒè¡Œ\n")

# è¯»å–æ–‡ä»¶
with open("example.txt", "r", encoding="utf-8") as f:
    content = f.read()
    print(content)

# é€è¡Œè¯»å–
with open("example.txt", "r", encoding="utf-8") as f:
    for line in f:
        print(line.strip())

# --- CSV æ–‡ä»¶ ---
import csv

# å†™å…¥ CSV
data = [
    ["å§“å", "å¹´é¾„", "åŸå¸‚"],
    ["Alice", 25, "Beijing"],
    ["Bob", 30, "Shanghai"]
]
with open("data.csv", "w", newline="", encoding="utf-8") as f:
    writer = csv.writer(f)
    writer.writerows(data)

# è¯»å– CSV
with open("data.csv", "r", encoding="utf-8") as f:
    reader = csv.reader(f)
    for row in reader:
        print(row)

# --- JSON æ–‡ä»¶ ---
import json

# å†™å…¥ JSON
user_data = {"name": "Alice", "age": 25, "hobbies": ["reading", "coding"]}
with open("user.json", "w", encoding="utf-8") as f:
    json.dump(user_data, f, ensure_ascii=False, indent=2)

# è¯»å– JSON
with open("user.json", "r", encoding="utf-8") as f:
    loaded_data = json.load(f)
    print(loaded_data)


# ============================================================================
# 8. å¼‚å¸¸å¤„ç† (Exception Handling)
# ============================================================================
"""
Python å¼‚å¸¸å¤„ç†ç»“æ„:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  try:                                       â”‚
â”‚      å¯èƒ½å‡ºé”™çš„ä»£ç                           â”‚
â”‚  except ExceptionType as e:                 â”‚
â”‚      å¤„ç†ç‰¹å®šå¼‚å¸¸                            â”‚
â”‚  except Exception as e:                     â”‚
â”‚      å¤„ç†å…¶ä»–å¼‚å¸¸                            â”‚
â”‚  else:                                      â”‚
â”‚      æ²¡æœ‰å¼‚å¸¸æ—¶æ‰§è¡Œ                          â”‚
â”‚  finally:                                   â”‚
â”‚      æ— è®ºå¦‚ä½•éƒ½æ‰§è¡Œï¼ˆæ¸…ç†èµ„æºï¼‰               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
"""

print("\n" + "=" * 50)
print("8. å¼‚å¸¸å¤„ç†")
print("=" * 50)

# åŸºæœ¬å¼‚å¸¸å¤„ç†
def divide(a, b):
    try:
        result = a / b
    except ZeroDivisionError:
        print("é”™è¯¯: é™¤æ•°ä¸èƒ½ä¸ºé›¶!")
        return None
    except TypeError as e:
        print(f"ç±»å‹é”™è¯¯: {e}")
        return None
    else:
        print("è®¡ç®—æˆåŠŸ")
        return result
    finally:
        print("æ¸…ç†å·¥ä½œå®Œæˆ")

print(divide(10, 2))   # æ­£å¸¸: 5.0
print(divide(10, 0))   # ZeroDivisionError
print(divide("10", 2)) # TypeError

# ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸
def validate_age(age):
    if age < 0:
        raise ValueError("å¹´é¾„ä¸èƒ½ä¸ºè´Ÿæ•°")
    if age > 150:
        raise ValueError("å¹´é¾„ä¸åˆç†")
    return True

try:
    validate_age(-5)
except ValueError as e:
    print(f"éªŒè¯å¤±è´¥: {e}")


# ============================================================================
# 9. æ¨¡å—å¯¼å…¥ (Modules)
# ============================================================================
"""
å¯¼å…¥æ–¹å¼:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
import math              # å¯¼å…¥æ•´ä¸ªæ¨¡å—
from math import sqrt    # å¯¼å…¥ç‰¹å®šå‡½æ•°
from math import *       # å¯¼å…¥æ‰€æœ‰ï¼ˆä¸æ¨èï¼‰
import numpy as np       # å¯¼å…¥å¹¶èµ·åˆ«å
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å¸¸ç”¨æ ‡å‡†åº“:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ¨¡å—        ç”¨é€”                    ç¤ºä¾‹
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
os          æ“ä½œç³»ç»Ÿæ¥å£            os.path, os.listdir()
sys         ç³»ç»Ÿç›¸å…³               sys.argv, sys.path
datetime    æ—¥æœŸæ—¶é—´               datetime.now()
json        JSONå¤„ç†               json.load(), json.dump()
re          æ­£åˆ™è¡¨è¾¾å¼             re.match(), re.search()
random      éšæœºæ•°                 random.randint()
collections é«˜çº§æ•°æ®ç»“æ„           Counter, defaultdict
itertools   è¿­ä»£å™¨å·¥å…·             chain, combinations
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
"""

print("\n" + "=" * 50)
print("9. æ¨¡å—å¯¼å…¥")
print("=" * 50)

# å¸¸ç”¨æ¨¡å—ç¤ºä¾‹
import os
import datetime
import random
from collections import Counter

# os æ¨¡å—
print(f"å½“å‰ç›®å½•: {os.getcwd()}")

# datetime æ¨¡å—
now = datetime.datetime.now()
print(f"å½“å‰æ—¶é—´: {now.strftime('%Y-%m-%d %H:%M:%S')}")

# random æ¨¡å—
print(f"éšæœºæ•° (1-10): {random.randint(1, 10)}")

# collections.Counter
words = ["apple", "banana", "apple", "cherry", "banana", "apple"]
word_count = Counter(words)
print(f"è¯é¢‘ç»Ÿè®¡: {word_count}")
print(f"æœ€å¸¸è§çš„2ä¸ª: {word_count.most_common(2)}")


# ============================================================================
# 10. é€’å½’ (Recursion)
# ============================================================================

print("\n" + "=" * 50)
print("10. é€’å½’")
print("=" * 50)

# é˜¶ä¹˜
def factorial(n):
    """è®¡ç®— n! (é€’å½’å®ç°)"""
    if n <= 1:
        return 1
    return n * factorial(n - 1)

print(f"5! = {factorial(5)}")  # 120

# æ–æ³¢é‚£å¥‘æ•°åˆ—
def fibonacci(n):
    """è®¡ç®—ç¬¬nä¸ªæ–æ³¢é‚£å¥‘æ•°"""
    if n <= 1:
        return n
    return fibonacci(n-1) + fibonacci(n-2)

print(f"æ–æ³¢é‚£å¥‘å‰10é¡¹: {[fibonacci(i) for i in range(10)]}")


# ============================================================================
# æ¸…ç†ä¸´æ—¶æ–‡ä»¶
# ============================================================================
import os

# åˆ é™¤ç¤ºä¾‹ä¸­åˆ›å»ºçš„ä¸´æ—¶æ–‡ä»¶
for f in ["example.txt", "data.csv", "user.json"]:
    if os.path.exists(f):
        os.remove(f)
        print(f"å·²æ¸…ç†: {f}")


print("\n" + "=" * 50)
print("å­¦ä¹ ç¬”è®°ç»“æŸ - Happy Coding! ğŸ")
print("=" * 50)
